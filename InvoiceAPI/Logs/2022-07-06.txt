2022-07-06 13:05:56,202 [8] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 13:06:17,784 [8] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 13:06:22,650 [8] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error en el procesamiento del docuemnto.  
2022-07-06 13:06:23,597 [8] ERROR InvoiceAPI.LoggerManager - App  Error - Mensaje: There are multiple root elements. Line 2, position 2130. 
2022-07-06 13:06:24,935 [8] ERROR InvoiceAPI.LoggerManager - App  Error - StackTrace:    at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.ParseDocumentContent()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   at System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   at System.Xml.XmlDocument.Load(XmlReader reader)
   at System.Xml.XmlDocument.Load(Stream inStream)
   at InvoiceAPI.Controllers.InvoicesController.GetEntryXmlDoc(Byte[] Bytes) in C:\Users\Administrator\source\repos\InvoiceAPI_4.0_adicion\InvoiceAPI\Controllers\InvoicesController.cs:line 904
   at InvoiceAPI.Controllers.InvoicesController.ProcesoDigestion(String xmlFile, String numCertificado) in C:\Users\Administrator\source\repos\InvoiceAPI_4.0_adicion\InvoiceAPI\Controllers\InvoicesController.cs:line 968 
2022-07-06 13:07:50,836 [8] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 13:09:52,187 [8] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrió un error en la búsqueda del comprobante en la base de datos. 
2022-07-06 13:09:54,533 [8] ERROR InvoiceAPI.LoggerManager - App  Error - Mensaje: There are multiple root elements. Line 2, position 2130. 
2022-07-06 17:25:23,940 [28] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 17:29:22,178 [28] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 18:24:50,421 [28] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-06 18:24:53,701 [28] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 18:24:53,731 [28] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-06 18:24:53,732 [28] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-06 18:25:52,981 [28] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-06 18:25:52,984 [28] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-06 18:25:52,991 [28] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-06 18:25:52,992 [28] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-06 18:26:16,359 [28] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza. One or more errors occurred. (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
2022-07-06 18:26:16,389 [28] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza.    at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at InvoiceAPI.Controllers.InvoicesController.EnvioTimbrarDiverza(ContenidoTimbrarDTO contenidoTimbrar, String usuario) in C:\Users\Administrator\source\repos\InvoiceAPI_4.0_adicion\InvoiceAPI\Controllers\InvoicesController.cs:line 610 
2022-07-06 18:30:38,427 [52] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 18:32:21,350 [52] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 18:32:25,762 [52] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-06 18:32:27,587 [52] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 18:32:27,589 [52] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-06 18:32:27,590 [52] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-06 18:32:29,007 [52] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-06 18:32:29,009 [52] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-06 18:32:29,009 [52] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-06 18:32:29,010 [52] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-06 18:32:29,336 [52] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Wed, 06 Jul 2022 23:32:34 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: uojvf48mku834vlv8ohj5bbncsggd7uq
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-06 18:32:29,357 [52] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:32:29,357 [52] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:32:29,360 [52] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-06 18:32:29,361 [52] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-06 18:32:29,361 [52] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:32:29,362 [52] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:32:29,363 [52] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-06 18:32:29,364 [52] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-06 18:32:29,392 [52] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="05c3dc95-29b9-4c7e-8e6c-0f4c3ed31938"
  Content-Length: 4030
} 
2022-07-06 18:32:29,396 [52] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-06 18:32:29,397 [52] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-06 18:32:29,397 [52] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-06 18:32:29,398 [52] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="05c3dc95-29b9-4c7e-8e6c-0f4c3ed31938"
  Content-Length: 4030
} 
2022-07-06 18:32:29,398 [52] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-06 18:35:48,342 [67] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 18:35:53,023 [67] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 18:35:59,014 [67] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-06 18:36:03,816 [67] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 18:36:03,819 [67] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-06 18:36:03,819 [67] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-06 18:36:05,955 [67] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-06 18:36:05,956 [67] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-06 18:36:05,957 [67] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-06 18:36:05,957 [67] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-06 18:36:06,165 [67] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Wed, 06 Jul 2022 23:36:12 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: lmc69al8cinc3ipasanb4196bn31lhh4
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-06 18:36:06,182 [67] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:36:06,182 [67] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:36:06,185 [67] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-06 18:36:06,186 [67] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-06 18:36:06,186 [67] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:36:06,188 [67] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:36:06,188 [67] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-06 18:36:06,189 [67] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-06 18:36:06,208 [67] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="5151a421-c381-40d6-8138-4008c196949d"
  Content-Length: 4030
} 
2022-07-06 18:36:06,213 [67] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-06 18:36:06,214 [67] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-06 18:36:06,215 [67] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-06 18:36:06,215 [67] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="5151a421-c381-40d6-8138-4008c196949d"
  Content-Length: 4030
} 
2022-07-06 18:36:06,216 [67] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-06 18:42:05,423 [78] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 18:42:10,606 [78] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 18:42:39,632 [78] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-06 18:42:40,247 [78] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 18:42:41,740 [78] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-06 18:42:41,742 [78] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-06 18:42:43,498 [78] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-06 18:42:43,500 [78] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-06 18:42:43,501 [78] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-06 18:42:43,506 [78] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-06 18:42:43,843 [78] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Wed, 06 Jul 2022 23:42:49 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: f0epr03u1f3b7l6aebso7a8cc19a6vti
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-06 18:42:43,851 [78] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:42:43,852 [78] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:42:46,072 [78] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-06 18:42:46,073 [78] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-06 18:42:46,074 [78] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 18:42:46,076 [78] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 18:42:46,076 [78] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-06 18:42:46,077 [78] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-06 18:42:48,552 [78] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="aa1e563c-940c-4fcb-9f60-1b3c3f8b7084"
  Content-Length: 4030
} 
2022-07-06 18:42:48,558 [78] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-06 18:42:51,172 [78] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-06 18:42:51,174 [78] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-06 18:42:52,614 [78] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="aa1e563c-940c-4fcb-9f60-1b3c3f8b7084"
  Content-Length: 4030
} 
2022-07-06 18:43:30,999 [78] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-06 18:45:59,881 [77] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 18:46:05,879 [77] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-06 18:46:26,053 [77] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-06 18:46:27,950 [77] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-06 18:47:05,741 [77] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-06 18:47:05,749 [77] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-06 18:47:09,107 [77] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-06 19:03:57,739 [77] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-06 19:03:57,742 [77] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-06 19:03:57,743 [77] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-06 19:03:58,095 [77] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 00:04:03 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: c34eas52nki0hlu7bcgv7ssha4m5tbpp
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-06 19:03:58,104 [77] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 19:03:58,105 [77] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 19:05:33,478 [77] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-06 19:05:33,483 [77] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-06 19:05:33,485 [77] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-06 19:05:33,491 [77] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-06 19:05:33,491 [77] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-06 19:05:33,492 [77] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-06 19:05:34,767 [77] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="34be5ecc-60be-4f1f-97d4-99f0ffd968e8"
  Content-Length: 4030
} 
2022-07-06 19:05:34,773 [77] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-06 19:05:36,100 [77] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-06 19:05:36,102 [77] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-06 19:05:36,802 [77] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="34be5ecc-60be-4f1f-97d4-99f0ffd968e8"
  Content-Length: 4030
} 
2022-07-06 19:05:37,237 [77] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-06 19:13:30,013 [68] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-06 19:15:03,093 [68] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
