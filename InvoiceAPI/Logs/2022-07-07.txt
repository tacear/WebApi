2022-07-07 12:46:12,078 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 12:46:26,739 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 12:54:47,241 [23] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 12:54:51,235 [23] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 12:59:12,813 [23] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 12:59:14,817 [23] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 12:59:15,882 [23] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 12:59:15,883 [23] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 12:59:17,239 [23] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 12:59:18,483 [23] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBkN0V0a1JyakpOL21EZnZNZDBQRjcwNDhiNWJWMFA1cDRQSlphVFNqOHJrS2w5YnhoMHV5bE9FU09BZ0thbG1XdkY3OEYwQzZ2U2lVSmJoK3BGM09ROEwvdDNFUEl6clUrdkxjWVBqTHRBY1BjZDhycys4YVE5ZlZiMlM3blF3NUorZDhubEM1U0xNck8wczBLeVFPek9PbitiN1JvYWZLTFFIT2RYcU03OWJXckYwZmE3d3B2US9QcFJyalNGSTdRdU9HQzNEMTQvSmNCUTJzanhMeTBZS2lyQWMxOElMYnljSXdQeXhWOWhveXBNcEdkS1NXbUlRMFh2U0ppNDNZcU5QNnp0ZCtacE1Wb0t3S3BGeWpVZDVKeUZHdm4zU2ZNaEpWNHhESmpMdXkzYk5zaFl6QllSYjl1YkpQbk5OdHcvY2xrNjU5R1REaGR2bXZVN1R2dz09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-07 12:59:18,486 [23] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-07 12:59:18,487 [23] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-07 12:59:19,006 [23] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 17:59:24 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: 8eg17dkqu8ed818ikgjf8s4lc21rcoid
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-07 12:59:19,027 [23] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 12:59:19,028 [23] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 12:59:30,028 [23] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-07 12:59:30,028 [23] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-07 12:59:30,028 [23] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 12:59:30,029 [23] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 12:59:30,029 [23] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-07 12:59:30,034 [23] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-07 12:59:31,340 [23] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="2685b703-6f0a-4d6e-bf02-714dcff9b22a"
  Content-Length: 4030
} 
2022-07-07 12:59:31,347 [23] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-07 12:59:47,443 [23] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-07 12:59:47,443 [23] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-07 12:59:49,268 [23] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="2685b703-6f0a-4d6e-bf02-714dcff9b22a"
  Content-Length: 4030
} 
2022-07-07 12:59:50,518 [23] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-07 13:00:04,747 [29] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 13:00:09,469 [29] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 13:17:24,454 [29] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 13:17:53,940 [29] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 13:18:49,934 [29] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 13:18:56,178 [29] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 13:19:49,342 [29] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 13:22:27,713 [29] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBVdWQ5Uk9nUlRhVTZYZGdIMGZsTzdCcEw2TEhPaGNMVTNmd2RxdEtrdEhFUlAzYUhpQktpbkdsNTJQcXRTY1d3T2s4M1Q2WlhxN1NkT3paVHoyWWoveHd6VVhVcFBsUlZORCtFaTAxdzhubytOUlJjQjRSUUdZRGNDVGlpSWJubG44NmRFWHJOSEhRZmRTU2dKUDFlTXIxd2IzOUhzRTRFd0ZESlpLRG1WbEJmUG1aZ2tPYmEyWEV3UlBPbElYWkFkQ21peHV0bW82UkloMHAvSEQ5T1NtaGFvakpTMlRFaGlRZVVRS01Rd0V5YUNxOUgxUFN3TVc1QnhmdHZnSHcza3hzcy9zQ1czQk5SaUxzNUhUenVibFRoVzBScDNoYWJMd21UOTBQdVJwNFdYUmIvNkQwY1FlRFlQUlhYYkFpQzlUM2NqT01SRFFVc0dPRkpwOEsvQT09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-07 13:22:55,359 [29] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-07 13:23:32,289 [29] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-07 13:23:38,754 [29] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 18:23:43 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: hjmfukio9f98af5483r9ojif83060q2i
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-07 13:23:49,841 [29] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 13:23:49,842 [29] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 13:24:02,222 [29] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-07 13:24:02,227 [29] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-07 13:24:02,228 [29] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 13:24:02,229 [29] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 13:24:02,230 [29] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-07 13:24:02,230 [29] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-07 13:24:03,340 [29] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="a2d5d174-3e62-4eb6-8e45-dabc9297c172"
  Content-Length: 4030
} 
2022-07-07 13:24:03,345 [29] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-07 13:24:05,242 [29] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-07 13:24:05,242 [29] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-07 13:24:06,306 [29] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="a2d5d174-3e62-4eb6-8e45-dabc9297c172"
  Content-Length: 4030
} 
2022-07-07 13:24:07,258 [29] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-07 13:51:30,170 [35] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 13:51:33,242 [35] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 13:51:43,792 [35] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 13:51:44,974 [35] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 13:51:46,140 [35] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 13:51:46,141 [35] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 13:51:47,485 [35] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 13:51:48,496 [35] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBVdWQ5Uk9nUlRhVTZYZGdIMGZsTzdCcEw2TEhPaGNMVTNmd2RxdEtrdEhFUlAzYUhpQktpbkdsNTJQcXRTY1d3T2s4M1Q2WlhxN1NkT3paVHoyWWoveHd6VVhVcFBsUlZORCtFaTAxdzhubytOUlJjQjRSUUdZRGNDVGlpSWJubG44NmRFWHJOSEhRZmRTU2dKUDFlTXIxd2IzOUhzRTRFd0ZESlpLRG1WbEJmUG1aZ2tPYmEyWEV3UlBPbElYWkFkQ21peHV0bW82UkloMHAvSEQ5T1NtaGFvakpTMlRFaGlRZVVRS01Rd0V5YUNxOUgxUFN3TVc1QnhmdHZnSHcza3hzcy9zQ1czQk5SaUxzNUhUenVibFRoVzBScDNoYWJMd21UOTBQdVJwNFdYUmIvNkQwY1FlRFlQUlhYYkFpQzlUM2NqT01SRFFVc0dPRkpwOEsvQT09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-07 13:51:48,499 [35] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-07 13:51:48,503 [35] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-07 13:51:48,862 [35] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 18:51:54 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: ng6iurrjrarg83p625utflu5emh2b83j
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-07 13:51:48,881 [35] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 13:51:48,882 [35] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 13:52:14,210 [35] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-07 13:52:14,218 [35] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-07 13:52:14,222 [35] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5407
} 
2022-07-07 13:52:14,223 [35] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 13:52:14,224 [35] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-07 13:52:14,225 [35] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-07 13:52:17,140 [35] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="8a06f2cd-0004-450a-9a59-90dee6f259e3"
  Content-Length: 4030
} 
2022-07-07 13:52:17,146 [35] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-07 13:52:19,470 [35] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-07 13:52:19,472 [35] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-07 13:52:20,462 [35] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="8a06f2cd-0004-450a-9a59-90dee6f259e3"
  Content-Length: 4030
} 
2022-07-07 13:52:21,236 [35] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-07 14:01:43,678 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 14:03:49,790 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 14:26:23,160 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 14:27:05,258 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 14:34:59,870 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 14:36:26,221 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 14:52:10,301 [26] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 15:38:57,659 [26] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 15:51:45,345 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 15:51:47,312 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 15:52:47,574 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 15:52:54,126 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:07:56,519 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 16:08:00,524 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:38:30,670 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 16:38:52,428 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:41:58,935 [17] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 16:42:02,350 [17] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:44:14,826 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 16:44:27,393 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:46:23,185 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 16:46:31,525 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 16:51:21,329 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 16:52:26,968 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 16:52:58,358 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 16:53:00,889 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 16:53:17,895 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 16:56:04,317 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBVdWQ5Uk9nUlRhVTZYZGdIMGZsTzdCcEw2TEhPaGNMVTNmd2RxdEtrdEhFUlAzYUhpQktpbkdsNTJQcXRTY1d3T2s4M1Q2WlhxN1NkT3paVHoyWWoveHd6VVhVcFBsUlZORCtFaTAxdzhubytOUlJjQjRSUUdZRGNDVGlpSWJubG44NmRFWHJOSEhRZmRTU2dKUDFlTXIxd2IzOUhzRTRFd0ZESlpLRG1WbEJmUG1aZ2tPYmEyWEV3UlBPbElYWkFkQ21peHV0bW82UkloMHAvSEQ5T1NtaGFvakpTMlRFaGlRZVVRS01Rd0V5YUNxOUgxUFN3TVc1QnhmdHZnSHcza3hzcy9zQ1czQk5SaUxzNUhUenVibFRoVzBScDNoYWJMd21UOTBQdVJwNFdYUmIvNkQwY1FlRFlQUlhYYkFpQzlUM2NqT01SRFFVc0dPRkpwOEsvQT09Ij48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-07 16:56:25,617 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-07 16:56:57,239 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-07 16:57:07,005 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 21:57:10 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: 2c8glbe4jti994cif8rgv3tqqeism2t6
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-07 17:03:17,477 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 17:03:52,382 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 17:07:22,610 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 17:08:04,405 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 17:08:13,488 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 17:08:13,492 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 17:08:14,728 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 17:08:45,907 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 17:08:49,295 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 17:22:40,784 [17] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 17:22:44,091 [17] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 17:40:01,286 [17] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 17:40:02,737 [17] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:19:33,504 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:19:36,561 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:19:41,697 [8] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:19:49,001 [8] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:20:01,835 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:20:04,445 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:22:29,660 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-07 18:22:31,819 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-07 18:22:33,235 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 09315200, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-07 18:22:33,236 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-07 18:22:35,238 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-07 18:22:36,693 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A09315200","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMTUyMDAiIEZlY2hhPSIyMDIyLTA3LTA1VDEyOjI2OjA4IiBGb3JtYVBhZ289IjAzIiBOb0NlcnRpZmljYWRvPSIzMDAwMTAwMDAwMDQwMDAwMjQzNCIgU3ViVG90YWw9IjQxMTcxLjA4IiBNb25lZGE9Ik1YTiIgVG90YWw9IjQ3NzU4LjQ1IiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgRXhwb3J0YWNpb249IjAxIiBNZXRvZG9QYWdvPSJQVUUiIEx1Z2FyRXhwZWRpY2lvbj0iMDY1MDAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgU2VsbG89IlBVdWQ5Uk9nUlRhVTZYZGdIMGZsTzdCcEw2TEhPaGNMVTNmd2RxdEtrdEhFUlAzYUhpQktpbkdsNTJQcXRTY1d3T2s4M1Q2WlhxN1NkT3paVHoyWWoveHd6VVhVcFBsUlZORCtFaTAxdzhubytOUlJjQjRSUUdZRGNDVGlpSWJubG44NmRFWHJOSEhRZmRTU2dKUDFlTXIxd2IzOUhzRTRFd0ZESlpLRG1WbEJmUG1aZ2tPYmEyWEV3UlBPbElYWkFkQ21peHV0bW82UkloMHAvSEQ5T1NtaGFvakpTMlRFaGlRZVVRS01Rd0V5YUNxOUgxUFN3TVc1QnhmdHZnSHcza3hzcy9zQ1czQk5SaUxzNUhUenVibFRoVzBScDNoYWJMd21UOTBQdVJwNFdYUmIvNkQwY1FlRFlQUlhYYkFpQzlUM2NqT01SRFFVc0dPRkpwOEsvQT09IiBSZWNlcHRvcj0iIj48Y2ZkaTpFbWlzb3IgUmZjPSJFS1U5MDAzMTczQzkiIE5vbWJyZT0iRVNDVUVMQSBLRU1QRVIgVVJHQVRFIFNBIERFIENWIiBSZWdpbWVuRmlzY2FsPSI2MDEiIC8+PGNmZGk6UmVjZXB0b3IgUmZjPSJQV0UxMDExMjVLSjYiIE5vbWJyZT0iUEFOIFdFQkVSJ1MiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIyMjQzMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDEiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSI0MTE3MS4wOCIgSW1wb3J0ZT0iNDExNzEuMDgiIE9iamV0b0ltcD0iMDIiPjxjZmRpOkltcHVlc3Rvcz48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iNDExNzEuMDgiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSI2NTg3LjM3IiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iNjU4Ny4zNyI+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjQxMTcxLjA4IiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iNjU4Ny4zNyIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-07 18:22:36,695 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-07 18:22:36,696 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-07 18:22:37,212 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 07 Jul 2022 23:22:42 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: 55clohk75sqbup8gd89anmgn66n50fgj
  Connection: close
  Content-Length: 605
  Content-Type: application/json; charset=utf-8
} 
2022-07-07 18:22:37,229 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 18:22:37,230 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5423
} 
2022-07-07 18:22:37,888 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-07 18:22:37,888 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-07 18:22:37,889 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5423
} 
2022-07-07 18:22:37,889 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["CFDI xml not valid, contains SAT Anexo 20 Mandatory unscaped characters"] 
2022-07-07 18:22:37,889 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Seguridata.  
2022-07-07 18:22:37,890 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Seguridata.  
2022-07-07 18:22:38,066 [10] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="30bb4d65-65be-4dbd-a9c3-c766e8fc64e8"
  Content-Length: 4042
} 
2022-07-07 18:22:38,075 [10] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: System.Net.Http.HttpConnection+HttpConnectionResponseContent 
2022-07-07 18:22:38,485 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Seguridata.  
2022-07-07 18:22:38,489 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: 404 
2022-07-07 18:22:38,639 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: Method: POST, RequestUri: 'http://200.66.66.211:9001/cfdi40/sstamp', Version: 2.0, Content: System.Net.Http.MultipartFormDataContent, Headers:
{
  Authorization: Basic Y2ZkaTMzLXNnZGF0YTpQcnVlYmFzMzMuc2dkYXRh
  Content-Type: multipart/form-data; boundary="30bb4d65-65be-4dbd-a9c3-c766e8fc64e8"
  Content-Length: 4042
} 
2022-07-07 18:22:39,434 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: {"code":404,"message":"HTTP POST for /cfdi40/sstamp is not supported."} 
2022-07-07 18:28:24,227 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:28:25,782 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:29:51,161 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:29:52,520 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 18:30:48,130 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 18:30:49,413 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-07 22:27:30,276 [17] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-07 22:27:33,349 [17] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
