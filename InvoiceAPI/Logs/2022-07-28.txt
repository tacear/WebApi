2022-07-28 13:46:51,137 [22] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-28 13:46:54,030 [22] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-28 13:49:26,060 [22] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-28 13:49:43,524 [22] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-28 13:49:45,324 [22] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 093026, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-28 13:49:45,327 [22] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-28 13:50:20,879 [22] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-28 13:50:33,847 [22] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A093026","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMDI2IiBGZWNoYT0iMjAyMi0wNy0yN1QxNzoyNjo1MSIgRm9ybWFQYWdvPSI5OSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIFN1YlRvdGFsPSIxMjgwLjAwIiBNb25lZGE9Ik1YTiIgVG90YWw9IjE0ODQuODAiIFRpcG9EZUNvbXByb2JhbnRlPSJJIiBFeHBvcnRhY2lvbj0iMDEiIE1ldG9kb1BhZ289IlBQRCIgTHVnYXJFeHBlZGljaW9uPSIwNjUwMCIgQ2VydGlmaWNhZG89Ik1JSUZ1ekNDQTZPZ0F3SUJBZ0lVTXpBd01ERXdNREF3TURBME1EQXdNREkwTXpRd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z2dFck1ROHdEUVlEVlFRRERBWkJReUJWUVZReExqQXNCZ05WQkFvTUpWTkZVbFpKUTBsUElFUkZJRUZFVFVsT1NWTlVVa0ZEU1U5T0lGUlNTVUpWVkVGU1NVRXhHakFZQmdOVkJBc01FVk5CVkMxSlJWTWdRWFYwYUc5eWFYUjVNU2d3SmdZSktvWklodmNOQVFrQkZobHZjMk5oY2k1dFlYSjBhVzVsZWtCellYUXVaMjlpTG0xNE1SMHdHd1lEVlFRSkRCUXpjbUVnWTJWeWNtRmtZU0JrWlNCallXUnBlakVPTUF3R0ExVUVFUXdGTURZek56QXhDekFKQmdOVkJBWVRBazFZTVJrd0Z3WURWUVFJREJCRFNWVkVRVVFnUkVVZ1RVVllTVU5QTVJFd0R3WURWUVFIREFoRFQxbFBRVU5CVGpFUk1BOEdBMVVFTFJNSU1pNDFMalF1TkRVeEpUQWpCZ2txaGtpRzl3MEJDUUlURm5KbGMzQnZibk5oWW14bE9pQkJRMFJOUVMxVFFWUXdIaGNOTVRrd05qRTNNVGswTkRFMFdoY05Nak13TmpFM01UazBOREUwV2pDQjRqRW5NQ1VHQTFVRUF4TWVSVk5EVlVWTVFTQkxSVTFRUlZJZ1ZWSkhRVlJGSUZOQklFUkZJRU5XTVNjd0pRWURWUVFwRXg1RlUwTlZSVXhCSUV0RlRWQkZVaUJWVWtkQlZFVWdVMEVnUkVVZ1ExWXhKekFsQmdOVkJBb1RIa1ZUUTFWRlRFRWdTMFZOVUVWU0lGVlNSMEZVUlNCVFFTQkVSU0JEVmpFbE1DTUdBMVVFTFJNY1JVdFZPVEF3TXpFM00wTTVJQzhnV0VsUlFqZzVNVEV4TmxGRk5ERWVNQndHQTFVRUJSTVZJQzhnV0VsUlFqZzVNVEV4TmsxSFVrMWFVakExTVI0d0hBWURWUVFMRXhWRmMyTjFaV3hoSUV0bGJYQmxjaUJWY21kaGRHVXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDTjBwZUtwZ2ZPTDc1aVlSdjFmcXErb1ZZc0xQVlVSL0dpYlltR0tjOUluSEZ5NWxZRjZPVFlqbklJdm1rT2RSb2JiR2xDVXhPUlgvdExzbDhZYTlnbTZZbzdoSG5PRFJCSUR1cDNHSVNGekIvOTZSOUsvTXpZUU9jc2NNSW9CREFSYXljbkx2eTdGbE12TzcvcmxWbnNTQVJ4WlJPOEt6OFpra3NqMnpwZVlwalpJeWEvMzY5K29HcVFrMWNUUmtIbzU5SnZKNFRmYmsvM2lJeWY0SC9Jbmk5bkJlOWNZV28wTW5Lb2I3RER0L3ZzZGk1dEE4bU10QTk1M0xhcE55Q1pJRENSUVFsVUdOZ0RxWTkvOEY1bVV2VmdrY2N6c0lnR2R2Zjl2TVFQU2YzampDaUtqN2o2dWN4bDErRndKV21idmdObWlhVVIvMHE0bTJybTc4bEZBZ01CQUFHakhUQWJNQXdHQTFVZEV3RUIvd1FDTUFBd0N3WURWUjBQQkFRREFnYkFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUJjcGoxVGpUNGppaW5JdWpJZEFsRnpFNmtSd1lKQ25ERzA4elNwNGtTblNoanhBREdFWEgyY2hlaEtNVjBGWTdjNG5qQTVlREdkQS9HMk9DVFB2RjVycGVDWlA1RHc1MDRSWmtZRGwyc3VSeit3YTFzTkJWcGJuQkpFSzBmUWNOM0lmdEJ3c2dORmRGaFV0Q3l3M2x1czFTU0piUHhqTEhTNkZjWlo1MVlTZUlmY05YT0F1VHFkaW11c2FYcTE1R3JTckNPa002bjJqZmoyc01KWU0ySFhhWEo2ckdURWdZbWhZZHd4V3RpbDZSZlpCK2ZHUS9IOUk5V0xubDRLVFpVUzZDOStOTEhoNEZQRGhTazE5ZnBTMlMvNTZhcWdGb0dBa1hBWXQ5Rnk1RUNhUGNVTElmSjFERWJzWEt5UmRDdjNKWTg5KzBNTmtPZGFEbnNlbVMybzVHbDA4ekk0aVl0dDNMNDBnQVo2ME5QaDMxa1ZMbllOc212Zk54WXlLcCtBZUp0REh5Vzl3N2Z0TTBIb2krQnVSbWNBUVNLRlYzcGs4ajUxbGEranJSQnJBVXY4YmxiUmNRNUJpWlV3SnpIRkVLSXdUc1JHb1J5RXg5NnNObkIwM242R1R3aklHejkyU21MZE5sOTVyOXJrdnArMm00UzZxMWxQdVhhRmc3REdCclhXQzhpeXFlV0UyaW9iZHdJSXVYUFRNVnFRYjEybTFkQWtKVlJPNU5kSG5QL01wcU92T2dMcW9aQk5IR3lCZzRHcW00c0NKSEN4QTFjOEVsZmEyUlFUQ2swdEF6bGxMNHZPbkkxR0hrR0puNjV4b2tHc2FVNEI0RDM2eGg3ZVdyZmo0L3BnV0htdG9EQVlhOHd6U3dvMkdWQ1pPcyttdEVnT1FCOTEvZz09IiBTZWxsbz0iZzFpLzhBM0lGQmcwYzZMWFlpZHlXMVZtTFA0OUxMZzJnd1lSUzQxSkRWd2I3MnFFVjNoVTZQbUFEODFMVUI1NDFnWEVqZUxRamNqaUNsR3RhRlgvcXVCNGRyS2ltVTBPdmR3Y1QwbHoxQmIxQjdnNGNka21RZG41dlYzVDhIRmRxU1BYQXJ4d1djK2dSZVU5SHNpZUh4bW9GbjVVTUVJbHFHM2hpeWo4MnJzUWZIcmU4WGxYOFhPNDBqWklHc010bFNmTXVjSEZVQ0RrNllHRFhqclVOTDdQNHM1UHE3MXZ4VTN2eWFaYlorUzM0TjJHK05jTkRDTG1jSEdvZitZMk5OazV5QmNiejRnVzZSY1FpV0Z2eXhKdTVEK2tZazRXdkxLb3pEVHVuYWlGNEs4dGNURHZMSHBIRmtONXNCUW44VVdpZW9sRFczVzErbXRjK0RCZlZRPT0iPjxjZmRpOkVtaXNvciBSZmM9IkVLVTkwMDMxNzNDOSIgTm9tYnJlPSJFU0NVRUxBIEtFTVBFUiBVUkdBVEUgU0EgREUgQ1YiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZmM9IkJFUzQyMDkwMUNZMyIgTm9tYnJlPSJTT0NJRURBRCBERSBCRU5FRklDRU5DSUEgRVNQQcORT0xBIiBEb21pY2lsaW9GaXNjYWxSZWNlcHRvcj0iMTE1MjAiIFJlZ2ltZW5GaXNjYWxSZWNlcHRvcj0iNjAzIiBVc29DRkRJPSJHMDMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIENsYXZlUHJvZFNlcnY9IjgwMTIxNjA0IiBDYW50aWRhZD0iMS4wMCIgQ2xhdmVVbmlkYWQ9IkU0OCIgVW5pZGFkPSJBQ1QiIERlc2NyaXBjaW9uPSJEZXJlY2hvIGRlIHBhdGVudGVzLCBtYXJjYXMgbyBkZXJlY2hvcyBkZSBhdXRvciIgVmFsb3JVbml0YXJpbz0iMTI4MC4wMCIgSW1wb3J0ZT0iMTI4MC4wMCIgT2JqZXRvSW1wPSIwMiI+PGNmZGk6SW1wdWVzdG9zPjxjZmRpOlRyYXNsYWRvcz48Y2ZkaTpUcmFzbGFkbyBCYXNlPSIxMjgwLjAwIiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iMjA0LjgwIiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iMjA0LjgwIj48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iMTI4MC4wMCIgSW1wdWVzdG89IjAwMiIgVGlwb0ZhY3Rvcj0iVGFzYSIgVGFzYU9DdW90YT0iMC4xNjAwMDAiIEltcG9ydGU9IjIwNC44MCIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-28 13:50:33,878 [22] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-28 13:50:33,880 [22] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-28 13:50:34,880 [22] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 28 Jul 2022 18:50:39 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: h1j8mhtifbvdvqu03h3a4d9j6e0otm82
  Connection: close
  Content-Length: 462
  Content-Type: application/json; charset=utf-8
} 
2022-07-28 13:50:34,898 [22] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["Invalid RSA Signature"] 
2022-07-28 13:50:34,898 [22] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5421
} 
2022-07-28 13:50:37,830 [22] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-28 13:50:37,833 [22] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-28 13:50:37,834 [22] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5421
} 
2022-07-28 13:50:37,835 [22] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["Invalid RSA Signature"] 
2022-07-28 13:50:37,838 [22] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-07-28 13:50:37,845 [22] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-07-28 13:50:40,324 [22] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-07-28 13:50:40,328 [22] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-07-28 13:50:46,792 [22] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-07-28 13:50:46,795 [22] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-07-28 13:50:48,127 [22] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-07-28 13:50:49,399 [22] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-07-28 13:54:35,284 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-28 13:55:20,481 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-28 13:59:47,026 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-28 14:01:21,225 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-28 14:02:10,762 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 093026, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-28 14:02:16,455 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-28 14:02:30,533 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-28 14:05:09,836 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A093026","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMDI2IiBGZWNoYT0iMjAyMi0wNy0yN1QxNzoyNjo1MSIgRm9ybWFQYWdvPSI5OSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIFN1YlRvdGFsPSIxMjgwLjAwIiBNb25lZGE9Ik1YTiIgVG90YWw9IjE0ODQuODAiIFRpcG9EZUNvbXByb2JhbnRlPSJJIiBFeHBvcnRhY2lvbj0iMDEiIE1ldG9kb1BhZ289IlBQRCIgTHVnYXJFeHBlZGljaW9uPSIwNjUwMCIgQ2VydGlmaWNhZG89Ik1JSUZ1ekNDQTZPZ0F3SUJBZ0lVTXpBd01ERXdNREF3TURBME1EQXdNREkwTXpRd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z2dFck1ROHdEUVlEVlFRRERBWkJReUJWUVZReExqQXNCZ05WQkFvTUpWTkZVbFpKUTBsUElFUkZJRUZFVFVsT1NWTlVVa0ZEU1U5T0lGUlNTVUpWVkVGU1NVRXhHakFZQmdOVkJBc01FVk5CVkMxSlJWTWdRWFYwYUc5eWFYUjVNU2d3SmdZSktvWklodmNOQVFrQkZobHZjMk5oY2k1dFlYSjBhVzVsZWtCellYUXVaMjlpTG0xNE1SMHdHd1lEVlFRSkRCUXpjbUVnWTJWeWNtRmtZU0JrWlNCallXUnBlakVPTUF3R0ExVUVFUXdGTURZek56QXhDekFKQmdOVkJBWVRBazFZTVJrd0Z3WURWUVFJREJCRFNWVkVRVVFnUkVVZ1RVVllTVU5QTVJFd0R3WURWUVFIREFoRFQxbFBRVU5CVGpFUk1BOEdBMVVFTFJNSU1pNDFMalF1TkRVeEpUQWpCZ2txaGtpRzl3MEJDUUlURm5KbGMzQnZibk5oWW14bE9pQkJRMFJOUVMxVFFWUXdIaGNOTVRrd05qRTNNVGswTkRFMFdoY05Nak13TmpFM01UazBOREUwV2pDQjRqRW5NQ1VHQTFVRUF4TWVSVk5EVlVWTVFTQkxSVTFRUlZJZ1ZWSkhRVlJGSUZOQklFUkZJRU5XTVNjd0pRWURWUVFwRXg1RlUwTlZSVXhCSUV0RlRWQkZVaUJWVWtkQlZFVWdVMEVnUkVVZ1ExWXhKekFsQmdOVkJBb1RIa1ZUUTFWRlRFRWdTMFZOVUVWU0lGVlNSMEZVUlNCVFFTQkVSU0JEVmpFbE1DTUdBMVVFTFJNY1JVdFZPVEF3TXpFM00wTTVJQzhnV0VsUlFqZzVNVEV4TmxGRk5ERWVNQndHQTFVRUJSTVZJQzhnV0VsUlFqZzVNVEV4TmsxSFVrMWFVakExTVI0d0hBWURWUVFMRXhWRmMyTjFaV3hoSUV0bGJYQmxjaUJWY21kaGRHVXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDTjBwZUtwZ2ZPTDc1aVlSdjFmcXErb1ZZc0xQVlVSL0dpYlltR0tjOUluSEZ5NWxZRjZPVFlqbklJdm1rT2RSb2JiR2xDVXhPUlgvdExzbDhZYTlnbTZZbzdoSG5PRFJCSUR1cDNHSVNGekIvOTZSOUsvTXpZUU9jc2NNSW9CREFSYXljbkx2eTdGbE12TzcvcmxWbnNTQVJ4WlJPOEt6OFpra3NqMnpwZVlwalpJeWEvMzY5K29HcVFrMWNUUmtIbzU5SnZKNFRmYmsvM2lJeWY0SC9Jbmk5bkJlOWNZV28wTW5Lb2I3RER0L3ZzZGk1dEE4bU10QTk1M0xhcE55Q1pJRENSUVFsVUdOZ0RxWTkvOEY1bVV2VmdrY2N6c0lnR2R2Zjl2TVFQU2YzampDaUtqN2o2dWN4bDErRndKV21idmdObWlhVVIvMHE0bTJybTc4bEZBZ01CQUFHakhUQWJNQXdHQTFVZEV3RUIvd1FDTUFBd0N3WURWUjBQQkFRREFnYkFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUJjcGoxVGpUNGppaW5JdWpJZEFsRnpFNmtSd1lKQ25ERzA4elNwNGtTblNoanhBREdFWEgyY2hlaEtNVjBGWTdjNG5qQTVlREdkQS9HMk9DVFB2RjVycGVDWlA1RHc1MDRSWmtZRGwyc3VSeit3YTFzTkJWcGJuQkpFSzBmUWNOM0lmdEJ3c2dORmRGaFV0Q3l3M2x1czFTU0piUHhqTEhTNkZjWlo1MVlTZUlmY05YT0F1VHFkaW11c2FYcTE1R3JTckNPa002bjJqZmoyc01KWU0ySFhhWEo2ckdURWdZbWhZZHd4V3RpbDZSZlpCK2ZHUS9IOUk5V0xubDRLVFpVUzZDOStOTEhoNEZQRGhTazE5ZnBTMlMvNTZhcWdGb0dBa1hBWXQ5Rnk1RUNhUGNVTElmSjFERWJzWEt5UmRDdjNKWTg5KzBNTmtPZGFEbnNlbVMybzVHbDA4ekk0aVl0dDNMNDBnQVo2ME5QaDMxa1ZMbllOc212Zk54WXlLcCtBZUp0REh5Vzl3N2Z0TTBIb2krQnVSbWNBUVNLRlYzcGs4ajUxbGEranJSQnJBVXY4YmxiUmNRNUJpWlV3SnpIRkVLSXdUc1JHb1J5RXg5NnNObkIwM242R1R3aklHejkyU21MZE5sOTVyOXJrdnArMm00UzZxMWxQdVhhRmc3REdCclhXQzhpeXFlV0UyaW9iZHdJSXVYUFRNVnFRYjEybTFkQWtKVlJPNU5kSG5QL01wcU92T2dMcW9aQk5IR3lCZzRHcW00c0NKSEN4QTFjOEVsZmEyUlFUQ2swdEF6bGxMNHZPbkkxR0hrR0puNjV4b2tHc2FVNEI0RDM2eGg3ZVdyZmo0L3BnV0htdG9EQVlhOHd6U3dvMkdWQ1pPcyttdEVnT1FCOTEvZz09IiBTZWxsbz0iZzFpLzhBM0lGQmcwYzZMWFlpZHlXMVZtTFA0OUxMZzJnd1lSUzQxSkRWd2I3MnFFVjNoVTZQbUFEODFMVUI1NDFnWEVqZUxRamNqaUNsR3RhRlgvcXVCNGRyS2ltVTBPdmR3Y1QwbHoxQmIxQjdnNGNka21RZG41dlYzVDhIRmRxU1BYQXJ4d1djK2dSZVU5SHNpZUh4bW9GbjVVTUVJbHFHM2hpeWo4MnJzUWZIcmU4WGxYOFhPNDBqWklHc010bFNmTXVjSEZVQ0RrNllHRFhqclVOTDdQNHM1UHE3MXZ4VTN2eWFaYlorUzM0TjJHK05jTkRDTG1jSEdvZitZMk5OazV5QmNiejRnVzZSY1FpV0Z2eXhKdTVEK2tZazRXdkxLb3pEVHVuYWlGNEs4dGNURHZMSHBIRmtONXNCUW44VVdpZW9sRFczVzErbXRjK0RCZlZRPT0iPjxjZmRpOkVtaXNvciBSZmM9IkVLVTkwMDMxNzNDOSIgTm9tYnJlPSJFU0NVRUxBIEtFTVBFUiBVUkdBVEUgU0EgREUgQ1YiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZmM9IkJFUzQyMDkwMUNZMyIgTm9tYnJlPSJTT0NJRURBRCBERSBCRU5FRklDRU5DSUEgRVNQQcORT0xBIiBEb21pY2lsaW9GaXNjYWxSZWNlcHRvcj0iMTE1MjAiIFJlZ2ltZW5GaXNjYWxSZWNlcHRvcj0iNjAzIiBVc29DRkRJPSJHMDMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIENsYXZlUHJvZFNlcnY9IjgwMTIxNjA0IiBDYW50aWRhZD0iMS4wMCIgQ2xhdmVVbmlkYWQ9IkU0OCIgVW5pZGFkPSJBQ1QiIERlc2NyaXBjaW9uPSJEZXJlY2hvIGRlIHBhdGVudGVzLCBtYXJjYXMgbyBkZXJlY2hvcyBkZSBhdXRvciIgVmFsb3JVbml0YXJpbz0iMTI4MC4wMCIgSW1wb3J0ZT0iMTI4MC4wMCIgT2JqZXRvSW1wPSIwMiI+PGNmZGk6SW1wdWVzdG9zPjxjZmRpOlRyYXNsYWRvcz48Y2ZkaTpUcmFzbGFkbyBCYXNlPSIxMjgwLjAwIiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iMjA0LjgwIiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29uY2VwdG8+PC9jZmRpOkNvbmNlcHRvcz48Y2ZkaTpJbXB1ZXN0b3MgVG90YWxJbXB1ZXN0b3NUcmFzbGFkYWRvcz0iMjA0LjgwIj48Y2ZkaTpUcmFzbGFkb3M+PGNmZGk6VHJhc2xhZG8gQmFzZT0iMTI4MC4wMCIgSW1wdWVzdG89IjAwMiIgVGlwb0ZhY3Rvcj0iVGFzYSIgVGFzYU9DdW90YT0iMC4xNjAwMDAiIEltcG9ydGU9IjIwNC44MCIgLz48L2NmZGk6VHJhc2xhZG9zPjwvY2ZkaTpJbXB1ZXN0b3M+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-07-28 14:05:33,779 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-28 14:05:52,092 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-28 14:06:13,143 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 28 Jul 2022 19:06:16 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: sii71jnndae92rn53k8ndvicqil1g8pi
  Connection: close
  Content-Length: 462
  Content-Type: application/json; charset=utf-8
} 
2022-07-28 14:06:48,541 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: ["Invalid RSA Signature"] 
2022-07-28 14:06:48,542 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5421
} 
2022-07-28 14:06:51,530 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-28 14:06:51,531 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-28 14:06:51,531 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5421
} 
2022-07-28 14:06:51,532 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: ["Invalid RSA Signature"] 
2022-07-28 14:06:51,532 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-07-28 14:06:51,549 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-07-28 14:06:53,548 [10] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-07-28 14:06:53,553 [10] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-07-28 14:06:55,443 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-07-28 14:06:55,445 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-07-28 14:06:55,602 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-07-28 14:06:55,781 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-07-28 16:03:17,704 [66] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-28 16:03:20,295 [66] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-28 16:03:39,517 [66] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-28 16:03:42,798 [66] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-28 16:03:43,610 [66] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 093026, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-28 16:03:43,612 [66] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-28 16:03:45,722 [66] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-28 16:03:50,874 [66] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A093026","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMDI2IiBGZWNoYT0iMjAyMi0wNy0yN1QxNzoyNjo1MSIgRm9ybWFQYWdvPSI5OSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIFN1YlRvdGFsPSIxMjgwLjAwIiBNb25lZGE9Ik1YTiIgVG90YWw9IjE0ODQuODAiIFRpcG9EZUNvbXByb2JhbnRlPSJJIiBFeHBvcnRhY2lvbj0iMDEiIE1ldG9kb1BhZ289IlBQRCIgTHVnYXJFeHBlZGljaW9uPSIwNjUwMCIgQ2VydGlmaWNhZG89Ik1JSUZ1ekNDQTZPZ0F3SUJBZ0lVTXpBd01ERXdNREF3TURBME1EQXdNREkwTXpRd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z2dFck1ROHdEUVlEVlFRRERBWkJReUJWUVZReExqQXNCZ05WQkFvTUpWTkZVbFpKUTBsUElFUkZJRUZFVFVsT1NWTlVVa0ZEU1U5T0lGUlNTVUpWVkVGU1NVRXhHakFZQmdOVkJBc01FVk5CVkMxSlJWTWdRWFYwYUc5eWFYUjVNU2d3SmdZSktvWklodmNOQVFrQkZobHZjMk5oY2k1dFlYSjBhVzVsZWtCellYUXVaMjlpTG0xNE1SMHdHd1lEVlFRSkRCUXpjbUVnWTJWeWNtRmtZU0JrWlNCallXUnBlakVPTUF3R0ExVUVFUXdGTURZek56QXhDekFKQmdOVkJBWVRBazFZTVJrd0Z3WURWUVFJREJCRFNWVkVRVVFnUkVVZ1RVVllTVU5QTVJFd0R3WURWUVFIREFoRFQxbFBRVU5CVGpFUk1BOEdBMVVFTFJNSU1pNDFMalF1TkRVeEpUQWpCZ2txaGtpRzl3MEJDUUlURm5KbGMzQnZibk5oWW14bE9pQkJRMFJOUVMxVFFWUXdIaGNOTVRrd05qRTNNVGswTkRFMFdoY05Nak13TmpFM01UazBOREUwV2pDQjRqRW5NQ1VHQTFVRUF4TWVSVk5EVlVWTVFTQkxSVTFRUlZJZ1ZWSkhRVlJGSUZOQklFUkZJRU5XTVNjd0pRWURWUVFwRXg1RlUwTlZSVXhCSUV0RlRWQkZVaUJWVWtkQlZFVWdVMEVnUkVVZ1ExWXhKekFsQmdOVkJBb1RIa1ZUUTFWRlRFRWdTMFZOVUVWU0lGVlNSMEZVUlNCVFFTQkVSU0JEVmpFbE1DTUdBMVVFTFJNY1JVdFZPVEF3TXpFM00wTTVJQzhnV0VsUlFqZzVNVEV4TmxGRk5ERWVNQndHQTFVRUJSTVZJQzhnV0VsUlFqZzVNVEV4TmsxSFVrMWFVakExTVI0d0hBWURWUVFMRXhWRmMyTjFaV3hoSUV0bGJYQmxjaUJWY21kaGRHVXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDTjBwZUtwZ2ZPTDc1aVlSdjFmcXErb1ZZc0xQVlVSL0dpYlltR0tjOUluSEZ5NWxZRjZPVFlqbklJdm1rT2RSb2JiR2xDVXhPUlgvdExzbDhZYTlnbTZZbzdoSG5PRFJCSUR1cDNHSVNGekIvOTZSOUsvTXpZUU9jc2NNSW9CREFSYXljbkx2eTdGbE12TzcvcmxWbnNTQVJ4WlJPOEt6OFpra3NqMnpwZVlwalpJeWEvMzY5K29HcVFrMWNUUmtIbzU5SnZKNFRmYmsvM2lJeWY0SC9Jbmk5bkJlOWNZV28wTW5Lb2I3RER0L3ZzZGk1dEE4bU10QTk1M0xhcE55Q1pJRENSUVFsVUdOZ0RxWTkvOEY1bVV2VmdrY2N6c0lnR2R2Zjl2TVFQU2YzampDaUtqN2o2dWN4bDErRndKV21idmdObWlhVVIvMHE0bTJybTc4bEZBZ01CQUFHakhUQWJNQXdHQTFVZEV3RUIvd1FDTUFBd0N3WURWUjBQQkFRREFnYkFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUJjcGoxVGpUNGppaW5JdWpJZEFsRnpFNmtSd1lKQ25ERzA4elNwNGtTblNoanhBREdFWEgyY2hlaEtNVjBGWTdjNG5qQTVlREdkQS9HMk9DVFB2RjVycGVDWlA1RHc1MDRSWmtZRGwyc3VSeit3YTFzTkJWcGJuQkpFSzBmUWNOM0lmdEJ3c2dORmRGaFV0Q3l3M2x1czFTU0piUHhqTEhTNkZjWlo1MVlTZUlmY05YT0F1VHFkaW11c2FYcTE1R3JTckNPa002bjJqZmoyc01KWU0ySFhhWEo2ckdURWdZbWhZZHd4V3RpbDZSZlpCK2ZHUS9IOUk5V0xubDRLVFpVUzZDOStOTEhoNEZQRGhTazE5ZnBTMlMvNTZhcWdGb0dBa1hBWXQ5Rnk1RUNhUGNVTElmSjFERWJzWEt5UmRDdjNKWTg5KzBNTmtPZGFEbnNlbVMybzVHbDA4ekk0aVl0dDNMNDBnQVo2ME5QaDMxa1ZMbllOc212Zk54WXlLcCtBZUp0REh5Vzl3N2Z0TTBIb2krQnVSbWNBUVNLRlYzcGs4ajUxbGEranJSQnJBVXY4YmxiUmNRNUJpWlV3SnpIRkVLSXdUc1JHb1J5RXg5NnNObkIwM242R1R3aklHejkyU21MZE5sOTVyOXJrdnArMm00UzZxMWxQdVhhRmc3REdCclhXQzhpeXFlV0UyaW9iZHdJSXVYUFRNVnFRYjEybTFkQWtKVlJPNU5kSG5QL01wcU92T2dMcW9aQk5IR3lCZzRHcW00c0NKSEN4QTFjOEVsZmEyUlFUQ2swdEF6bGxMNHZPbkkxR0hrR0puNjV4b2tHc2FVNEI0RDM2eGg3ZVdyZmo0L3BnV0htdG9EQVlhOHd6U3dvMkdWQ1pPcyttdEVnT1FCOTEvZz09IiBTZWxsbz0iWnkwZjZRdGZaVElwblY3L3ZVTDRlTW5WRDFiU241cTNvb3hDS0lZTzUzZGZxYjZMVG10L0R5ZlB2VVZWZlY5QlFqSTlqTmIxZnRzQytKa1dabHBUdzkzQk5tSUdzZlhDL204TUpTdTl2MmUyQWNocEVXdzF3aERaUkVFL0pabDNPUFRqMG44SE00Zm9rbU8vNmFLTnRzbzlQS3VRTjlFS0F3WnFhbEE5N2FrN2pRMzYyOGFHUCthTlRvYjErN0hrN2RuU1pLMVUyMStrdkVOUTJoOGEzWWRiaGZtakxBa1doUGZUMVR2OFFqR0RkeW4zeXdPMWZEYWhyYmhtSGRQS3VyTG5pUEdvT2luN0VJdTRtL3lJN3FvZ2FEek1vVzR3TkFETTNWYitJdjNnMDd5blFRV1FXL1FMaUZUSUtYRzJmenFNK2NHL0N4YmpPa0pVVW1jNkJBPT0iPjxjZmRpOkVtaXNvciBSZmM9IkVLVTkwMDMxNzNDOSIgTm9tYnJlPSJFU0NVRUxBIEtFTVBFUiBVUkdBVEUgU0EgREUgQ1YiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZmM9IkJFUzQyMDkwMUNZMyIgTm9tYnJlPSJTT0NJRURBRCBERSBCRU5FRklDRU5DSUEgRVNQQU5PTEEiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIxMTUyMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDMiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSIxMjgwLjAwIiBJbXBvcnRlPSIxMjgwLjAwIiBPYmpldG9JbXA9IjAyIj48Y2ZkaTpJbXB1ZXN0b3M+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjEyODAuMDAiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSIyMDQuODAiIC8+PC9jZmRpOlRyYXNsYWRvcz48L2NmZGk6SW1wdWVzdG9zPjwvY2ZkaTpDb25jZXB0bz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkltcHVlc3RvcyBUb3RhbEltcHVlc3Rvc1RyYXNsYWRhZG9zPSIyMDQuODAiPjxjZmRpOlRyYXNsYWRvcz48Y2ZkaTpUcmFzbGFkbyBCYXNlPSIxMjgwLjAwIiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iMjA0LjgwIiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29tcHJvYmFudGU+"}} 
2022-07-28 16:03:50,875 [66] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-28 16:03:50,875 [66] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-28 16:04:14,308 [66] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza. One or more errors occurred. (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
2022-07-28 16:04:14,367 [66] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza.    at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at InvoiceAPI.Controllers.InvoicesController.EnvioTimbrarDiverza(ContenidoTimbrarDTO contenidoTimbrar, String usuario) in C:\Users\Administrator\source\repos\InvoiceAPI_4.0_adicion\InvoiceAPI\Controllers\InvoicesController.cs:line 681 
2022-07-28 16:04:14,374 [66] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-28 16:04:14,375 [66] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 1000 
2022-07-28 16:04:14,375 [66] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***:  
2022-07-28 16:04:14,376 [66] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: One or more errors occurred. (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
2022-07-28 16:04:14,377 [66] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-07-28 16:04:14,377 [66] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-07-28 16:04:18,574 [66] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-07-28 16:04:18,580 [66] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-07-28 16:04:26,445 [66] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-07-28 16:04:26,450 [66] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-07-28 16:04:40,662 [66] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-07-28 16:04:41,976 [66] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-07-28 16:04:57,259 [63] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-07-28 16:04:59,623 [63] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-07-28 16:05:07,775 [63] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-07-28 16:05:12,161 [63] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-07-28 16:05:13,073 [63] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 093026, Número de serie del certificado: 30001000000400002434, rfc: EKU9003173C9, Serie: A 
2022-07-28 16:05:13,080 [63] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-07-28 16:05:16,065 [63] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-07-28 16:05:19,968 [63] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "EKU9003173C9"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "EKU9003173C9A093026","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48Y2ZkaTpDb21wcm9iYW50ZSB4bWxuczpjZmRpPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvY2ZkLzQiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5zYXQuZ29iLm14L2NmZC80IGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvNC9jZmR2NDAueHNkIiBWZXJzaW9uPSI0LjAiIFNlcmllPSJBIiBGb2xpbz0iMDkzMDI2IiBGZWNoYT0iMjAyMi0wNy0yN1QxNzoyNjo1MSIgRm9ybWFQYWdvPSI5OSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIFN1YlRvdGFsPSIxMjgwLjAwIiBNb25lZGE9Ik1YTiIgVG90YWw9IjE0ODQuODAiIFRpcG9EZUNvbXByb2JhbnRlPSJJIiBFeHBvcnRhY2lvbj0iMDEiIE1ldG9kb1BhZ289IlBQRCIgTHVnYXJFeHBlZGljaW9uPSIwNjUwMCIgQ2VydGlmaWNhZG89Ik1JSUZ1ekNDQTZPZ0F3SUJBZ0lVTXpBd01ERXdNREF3TURBME1EQXdNREkwTXpRd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z2dFck1ROHdEUVlEVlFRRERBWkJReUJWUVZReExqQXNCZ05WQkFvTUpWTkZVbFpKUTBsUElFUkZJRUZFVFVsT1NWTlVVa0ZEU1U5T0lGUlNTVUpWVkVGU1NVRXhHakFZQmdOVkJBc01FVk5CVkMxSlJWTWdRWFYwYUc5eWFYUjVNU2d3SmdZSktvWklodmNOQVFrQkZobHZjMk5oY2k1dFlYSjBhVzVsZWtCellYUXVaMjlpTG0xNE1SMHdHd1lEVlFRSkRCUXpjbUVnWTJWeWNtRmtZU0JrWlNCallXUnBlakVPTUF3R0ExVUVFUXdGTURZek56QXhDekFKQmdOVkJBWVRBazFZTVJrd0Z3WURWUVFJREJCRFNWVkVRVVFnUkVVZ1RVVllTVU5QTVJFd0R3WURWUVFIREFoRFQxbFBRVU5CVGpFUk1BOEdBMVVFTFJNSU1pNDFMalF1TkRVeEpUQWpCZ2txaGtpRzl3MEJDUUlURm5KbGMzQnZibk5oWW14bE9pQkJRMFJOUVMxVFFWUXdIaGNOTVRrd05qRTNNVGswTkRFMFdoY05Nak13TmpFM01UazBOREUwV2pDQjRqRW5NQ1VHQTFVRUF4TWVSVk5EVlVWTVFTQkxSVTFRUlZJZ1ZWSkhRVlJGSUZOQklFUkZJRU5XTVNjd0pRWURWUVFwRXg1RlUwTlZSVXhCSUV0RlRWQkZVaUJWVWtkQlZFVWdVMEVnUkVVZ1ExWXhKekFsQmdOVkJBb1RIa1ZUUTFWRlRFRWdTMFZOVUVWU0lGVlNSMEZVUlNCVFFTQkVSU0JEVmpFbE1DTUdBMVVFTFJNY1JVdFZPVEF3TXpFM00wTTVJQzhnV0VsUlFqZzVNVEV4TmxGRk5ERWVNQndHQTFVRUJSTVZJQzhnV0VsUlFqZzVNVEV4TmsxSFVrMWFVakExTVI0d0hBWURWUVFMRXhWRmMyTjFaV3hoSUV0bGJYQmxjaUJWY21kaGRHVXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDTjBwZUtwZ2ZPTDc1aVlSdjFmcXErb1ZZc0xQVlVSL0dpYlltR0tjOUluSEZ5NWxZRjZPVFlqbklJdm1rT2RSb2JiR2xDVXhPUlgvdExzbDhZYTlnbTZZbzdoSG5PRFJCSUR1cDNHSVNGekIvOTZSOUsvTXpZUU9jc2NNSW9CREFSYXljbkx2eTdGbE12TzcvcmxWbnNTQVJ4WlJPOEt6OFpra3NqMnpwZVlwalpJeWEvMzY5K29HcVFrMWNUUmtIbzU5SnZKNFRmYmsvM2lJeWY0SC9Jbmk5bkJlOWNZV28wTW5Lb2I3RER0L3ZzZGk1dEE4bU10QTk1M0xhcE55Q1pJRENSUVFsVUdOZ0RxWTkvOEY1bVV2VmdrY2N6c0lnR2R2Zjl2TVFQU2YzampDaUtqN2o2dWN4bDErRndKV21idmdObWlhVVIvMHE0bTJybTc4bEZBZ01CQUFHakhUQWJNQXdHQTFVZEV3RUIvd1FDTUFBd0N3WURWUjBQQkFRREFnYkFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUJjcGoxVGpUNGppaW5JdWpJZEFsRnpFNmtSd1lKQ25ERzA4elNwNGtTblNoanhBREdFWEgyY2hlaEtNVjBGWTdjNG5qQTVlREdkQS9HMk9DVFB2RjVycGVDWlA1RHc1MDRSWmtZRGwyc3VSeit3YTFzTkJWcGJuQkpFSzBmUWNOM0lmdEJ3c2dORmRGaFV0Q3l3M2x1czFTU0piUHhqTEhTNkZjWlo1MVlTZUlmY05YT0F1VHFkaW11c2FYcTE1R3JTckNPa002bjJqZmoyc01KWU0ySFhhWEo2ckdURWdZbWhZZHd4V3RpbDZSZlpCK2ZHUS9IOUk5V0xubDRLVFpVUzZDOStOTEhoNEZQRGhTazE5ZnBTMlMvNTZhcWdGb0dBa1hBWXQ5Rnk1RUNhUGNVTElmSjFERWJzWEt5UmRDdjNKWTg5KzBNTmtPZGFEbnNlbVMybzVHbDA4ekk0aVl0dDNMNDBnQVo2ME5QaDMxa1ZMbllOc212Zk54WXlLcCtBZUp0REh5Vzl3N2Z0TTBIb2krQnVSbWNBUVNLRlYzcGs4ajUxbGEranJSQnJBVXY4YmxiUmNRNUJpWlV3SnpIRkVLSXdUc1JHb1J5RXg5NnNObkIwM242R1R3aklHejkyU21MZE5sOTVyOXJrdnArMm00UzZxMWxQdVhhRmc3REdCclhXQzhpeXFlV0UyaW9iZHdJSXVYUFRNVnFRYjEybTFkQWtKVlJPNU5kSG5QL01wcU92T2dMcW9aQk5IR3lCZzRHcW00c0NKSEN4QTFjOEVsZmEyUlFUQ2swdEF6bGxMNHZPbkkxR0hrR0puNjV4b2tHc2FVNEI0RDM2eGg3ZVdyZmo0L3BnV0htdG9EQVlhOHd6U3dvMkdWQ1pPcyttdEVnT1FCOTEvZz09IiBTZWxsbz0iWnkwZjZRdGZaVElwblY3L3ZVTDRlTW5WRDFiU241cTNvb3hDS0lZTzUzZGZxYjZMVG10L0R5ZlB2VVZWZlY5QlFqSTlqTmIxZnRzQytKa1dabHBUdzkzQk5tSUdzZlhDL204TUpTdTl2MmUyQWNocEVXdzF3aERaUkVFL0pabDNPUFRqMG44SE00Zm9rbU8vNmFLTnRzbzlQS3VRTjlFS0F3WnFhbEE5N2FrN2pRMzYyOGFHUCthTlRvYjErN0hrN2RuU1pLMVUyMStrdkVOUTJoOGEzWWRiaGZtakxBa1doUGZUMVR2OFFqR0RkeW4zeXdPMWZEYWhyYmhtSGRQS3VyTG5pUEdvT2luN0VJdTRtL3lJN3FvZ2FEek1vVzR3TkFETTNWYitJdjNnMDd5blFRV1FXL1FMaUZUSUtYRzJmenFNK2NHL0N4YmpPa0pVVW1jNkJBPT0iPjxjZmRpOkVtaXNvciBSZmM9IkVLVTkwMDMxNzNDOSIgTm9tYnJlPSJFU0NVRUxBIEtFTVBFUiBVUkdBVEUgU0EgREUgQ1YiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZmM9IkJFUzQyMDkwMUNZMyIgTm9tYnJlPSJTT0NJRURBRCBERSBCRU5FRklDRU5DSUEgRVNQQU5PTEEiIERvbWljaWxpb0Zpc2NhbFJlY2VwdG9yPSIxMTUyMCIgUmVnaW1lbkZpc2NhbFJlY2VwdG9yPSI2MDMiIFVzb0NGREk9IkcwMyIgLz48Y2ZkaTpDb25jZXB0b3M+PGNmZGk6Q29uY2VwdG8gQ2xhdmVQcm9kU2Vydj0iODAxMjE2MDQiIENhbnRpZGFkPSIxLjAwIiBDbGF2ZVVuaWRhZD0iRTQ4IiBVbmlkYWQ9IkFDVCIgRGVzY3JpcGNpb249IkRlcmVjaG8gZGUgcGF0ZW50ZXMsIG1hcmNhcyBvIGRlcmVjaG9zIGRlIGF1dG9yIiBWYWxvclVuaXRhcmlvPSIxMjgwLjAwIiBJbXBvcnRlPSIxMjgwLjAwIiBPYmpldG9JbXA9IjAyIj48Y2ZkaTpJbXB1ZXN0b3M+PGNmZGk6VHJhc2xhZG9zPjxjZmRpOlRyYXNsYWRvIEJhc2U9IjEyODAuMDAiIEltcHVlc3RvPSIwMDIiIFRpcG9GYWN0b3I9IlRhc2EiIFRhc2FPQ3VvdGE9IjAuMTYwMDAwIiBJbXBvcnRlPSIyMDQuODAiIC8+PC9jZmRpOlRyYXNsYWRvcz48L2NmZGk6SW1wdWVzdG9zPjwvY2ZkaTpDb25jZXB0bz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkltcHVlc3RvcyBUb3RhbEltcHVlc3Rvc1RyYXNsYWRhZG9zPSIyMDQuODAiPjxjZmRpOlRyYXNsYWRvcz48Y2ZkaTpUcmFzbGFkbyBCYXNlPSIxMjgwLjAwIiBJbXB1ZXN0bz0iMDAyIiBUaXBvRmFjdG9yPSJUYXNhIiBUYXNhT0N1b3RhPSIwLjE2MDAwMCIgSW1wb3J0ZT0iMjA0LjgwIiAvPjwvY2ZkaTpUcmFzbGFkb3M+PC9jZmRpOkltcHVlc3Rvcz48L2NmZGk6Q29tcHJvYmFudGU+"}} 
2022-07-28 16:05:19,970 [63] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-07-28 16:05:19,972 [63] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-07-28 16:05:20,747 [63] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Thu, 28 Jul 2022 21:05:25 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: 3lctmk9081ngo702b0hi4d2rhp9lpfik
  Connection: close
  Content-Length: 1758
  Content-Type: application/json; charset=utf-8
} 
2022-07-28 16:05:20,757 [63] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"sat_error_message":"El campo Nombre del receptor, debe encontrarse en la lista de RFC inscritos no cancelados en el SAT.","sat_error_code":"CFDI40144","message":"El campo Nombre del receptor, debe encontrarse en la lista de RFC inscritos no cancelados en el SAT.","field":"ReceptorNombre","code":1450},{"sat_error_message":"El campo Nombre del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor.","sat_error_code":"CFDI40145","message":"El campo Nombre del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor.","field":"ReceptorNombre","code":1450}] 
2022-07-28 16:05:20,758 [63] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5417
} 
2022-07-28 16:05:21,598 [63] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-07-28 16:05:21,599 [63] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-07-28 16:05:21,600 [63] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5417
} 
2022-07-28 16:05:21,602 [63] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"sat_error_message":"El campo Nombre del receptor, debe encontrarse en la lista de RFC inscritos no cancelados en el SAT.","sat_error_code":"CFDI40144","message":"El campo Nombre del receptor, debe encontrarse en la lista de RFC inscritos no cancelados en el SAT.","field":"ReceptorNombre","code":1450},{"sat_error_message":"El campo Nombre del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor.","sat_error_code":"CFDI40145","message":"El campo Nombre del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor.","field":"ReceptorNombre","code":1450}] 
2022-07-28 16:05:21,603 [63] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-07-28 16:05:21,603 [63] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-07-28 16:05:22,324 [63] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-07-28 16:05:22,339 [63] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-07-28 16:05:25,219 [63] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-07-28 16:05:25,220 [63] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-07-28 16:05:25,624 [63] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-07-28 16:05:25,860 [63] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
