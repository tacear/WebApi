2022-08-02 12:51:43,816 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 12:51:48,294 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 12:52:13,341 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 12:52:37,598 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 12:52:39,245 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 12:52:39,259 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 12:52:43,659 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 12:52:52,355 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJYbS9aaXB5RHZSQ254eS9XQUFlYUVsbDhnWFJaUFY1R0JhKy93dDFIbnV6OW5sL1gxV2xHUGNBRlBFZGJwUE9QWmJJNXhVTGVGMXdzYlRLbGs0RzBWWGxQV0lwc2hTNFluOGZRbmRUQ2dYZmViMVY0TW00QnVIUVlwV1dRMk5VcnJtemRocHhTMEowcjNoZ2sxZnNEVmFuNjJWbi9pdldIMEdxM0h4UnhISVR3ZFFnZnBpRnIzVXg3M29ZUWw3QUlZNElQSklrZDRkN01ldnYyQWgzSVlQWUFCbFJZMVRjNWlqU1lYbWIvelA0ZzhlcWlMNkc5RnB4ZkFMSVdZNTVXeWd5aUU3RmRZRVAwYU00ZGRySUs3dTArNFpTYU52M3c5OXdDQWd2V1BoQzZ2V2ZwQnNZZzRldHhuYTlDSUNXWTI0UjFYUTVUUGl4bWxiU2REdFlUTWc9PSIgRmVjaGE9IjIwMjItMDgtMDFUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 12:52:52,359 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 12:52:52,360 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 12:52:52,773 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 17:53:00 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: ah6bssr6bs43qnbuan1j1krk954me3s6
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 12:52:52,812 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 12:52:52,813 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 12:53:59,560 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 12:54:00,757 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 12:54:02,149 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 12:54:03,152 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 12:54:04,426 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 12:54:09,625 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 12:59:02,748 [24] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 12:59:03,157 [24] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 12:59:04,713 [24] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 12:59:05,645 [24] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 12:59:05,879 [24] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 12:59:05,881 [24] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 12:59:06,228 [24] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 12:59:07,144 [24] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJYbS9aaXB5RHZSQ254eS9XQUFlYUVsbDhnWFJaUFY1R0JhKy93dDFIbnV6OW5sL1gxV2xHUGNBRlBFZGJwUE9QWmJJNXhVTGVGMXdzYlRLbGs0RzBWWGxQV0lwc2hTNFluOGZRbmRUQ2dYZmViMVY0TW00QnVIUVlwV1dRMk5VcnJtemRocHhTMEowcjNoZ2sxZnNEVmFuNjJWbi9pdldIMEdxM0h4UnhISVR3ZFFnZnBpRnIzVXg3M29ZUWw3QUlZNElQSklrZDRkN01ldnYyQWgzSVlQWUFCbFJZMVRjNWlqU1lYbWIvelA0ZzhlcWlMNkc5RnB4ZkFMSVdZNTVXeWd5aUU3RmRZRVAwYU00ZGRySUs3dTArNFpTYU52M3c5OXdDQWd2V1BoQzZ2V2ZwQnNZZzRldHhuYTlDSUNXWTI0UjFYUTVUUGl4bWxiU2REdFlUTWc9PSIgRmVjaGE9IjIwMjItMDgtMDFUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 12:59:07,145 [24] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 12:59:07,146 [24] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 12:59:07,459 [24] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 17:59:15 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: jd92u7iqbvdqcg0k3sv8bmdt5qb881oq
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 12:59:07,476 [24] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 12:59:07,477 [24] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 12:59:07,689 [24] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 12:59:07,694 [24] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 12:59:07,696 [24] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 12:59:07,699 [24] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 12:59:07,701 [24] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 12:59:07,841 [24] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 12:59:08,569 [24] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-08-02 12:59:08,733 [24] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-08-02 12:59:09,450 [24] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-08-02 12:59:09,451 [24] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-08-02 12:59:09,610 [24] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-08-02 12:59:09,806 [24] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-08-02 13:40:59,332 [26] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 13:42:02,298 [26] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 14:02:20,851 [26] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 14:02:37,234 [26] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 14:04:44,176 [26] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 14:04:45,304 [26] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 14:04:50,356 [26] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 14:05:43,457 [26] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 14:05:43,459 [26] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 14:05:43,460 [26] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 14:06:06,838 [26] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza. One or more errors occurred. (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
2022-08-02 14:06:06,867 [26] ERROR InvoiceAPI.LoggerManager - App  Error - Ocurrio un error al intentar timbrar el archivo con Diverza.    at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at InvoiceAPI.Controllers.InvoicesController.EnvioTimbrarDiverza(ContenidoTimbrarDTO contenidoTimbrar, String usuario) in C:\Users\Administrator\source\repos\InvoiceAPI_4.0_adicion\InvoiceAPI\Controllers\InvoicesController.cs:line 681 
2022-08-02 14:06:06,875 [26] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 14:06:06,875 [26] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 1000 
2022-08-02 14:06:06,875 [26] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***:  
2022-08-02 14:06:06,876 [26] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: One or more errors occurred. (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
2022-08-02 14:06:06,876 [26] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 14:06:23,492 [26] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 14:14:04,150 [26] INFO InvoiceAPI.LoggerManager - App  Info - Solicitud enviada. Request: SW.Services.Stamp.Stamp 
2022-08-02 14:14:06,587 [26] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-08-02 14:14:18,406 [26] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-08-02 14:14:18,406 [26] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-08-02 14:14:21,013 [26] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-08-02 14:14:22,460 [26] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-08-02 15:06:39,369 [9] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 15:06:53,651 [9] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 15:07:55,455 [9] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 15:08:54,112 [9] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 15:09:04,794 [9] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 15:09:04,800 [9] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 15:09:10,089 [9] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 15:09:19,313 [9] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 15:09:19,315 [9] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 15:09:19,316 [9] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 15:09:19,665 [9] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 20:09:27 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: hna38rjsqbm3fkaak9ib3jto2tills0s
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 15:09:19,683 [9] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:09:19,684 [9] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:09:21,564 [9] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 15:09:21,565 [9] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 15:09:21,567 [9] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:09:21,570 [9] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:09:21,571 [9] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 15:10:04,236 [9] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 15:34:41,440 [25] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 15:34:45,552 [25] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 15:36:57,406 [25] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 15:37:34,205 [25] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 15:37:50,516 [25] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 15:37:50,517 [25] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 15:37:54,843 [25] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 15:38:41,834 [25] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 15:38:41,837 [25] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 15:38:41,844 [25] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 15:38:42,172 [25] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 20:38:50 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: a50pimpv88veehev0v3idkrrbbkrovqq
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 15:38:42,187 [25] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:38:42,187 [25] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:38:43,157 [25] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 15:38:43,157 [25] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 15:38:43,158 [25] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:38:43,158 [25] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:38:43,159 [25] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 15:38:44,122 [25] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 15:50:05,160 [24] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 15:50:08,259 [24] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 15:50:10,524 [24] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 15:50:11,470 [24] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 15:50:12,306 [24] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 15:50:12,307 [24] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 15:50:12,699 [24] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 15:50:22,307 [24] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 15:50:22,309 [24] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 15:50:22,311 [24] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 15:50:22,587 [24] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 20:50:29 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: d2apl349cv19dj42h0sfj35ff0k9t57o
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 15:50:22,601 [24] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:50:22,602 [24] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:50:23,166 [24] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 15:50:23,169 [24] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 15:50:23,170 [24] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:50:23,176 [24] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:50:23,177 [24] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 15:50:24,807 [24] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 15:51:25,396 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 15:51:36,815 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 15:52:53,834 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 15:53:11,582 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 15:53:12,944 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 15:53:12,946 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 15:53:16,387 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 15:53:21,354 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 15:53:21,356 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 15:53:21,356 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 15:53:21,624 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 20:53:29 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: lo0vf05m8ed8i66oeo92ulk313vle0sf
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 15:53:21,638 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:53:21,639 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:53:22,105 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 15:53:22,105 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 15:53:22,106 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:53:22,107 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:53:22,107 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 15:53:26,064 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 15:54:38,601 [10] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
2022-08-02 15:54:43,573 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con LUNA.  
2022-08-02 15:54:43,581 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: error 
2022-08-02 15:54:43,745 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: 401 
2022-08-02 15:54:43,962 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: Unauthorized 
2022-08-02 15:57:53,985 [21] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 15:57:55,160 [21] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 15:58:15,854 [21] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 15:58:20,397 [21] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 15:58:22,063 [21] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 15:58:22,063 [21] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 15:58:24,341 [21] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 15:58:30,636 [21] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 15:58:30,639 [21] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 15:58:30,641 [21] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 15:58:30,956 [21] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 20:58:38 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: ng58laf6d5pjdqafqb37a1tc97cf18dr
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 15:58:30,976 [21] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:58:30,978 [21] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:58:31,299 [21] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 15:58:31,300 [21] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 15:58:31,301 [21] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 15:58:31,302 [21] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 15:58:31,303 [21] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 15:58:32,502 [21] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 17:28:25,834 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 17:28:27,599 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 17:30:08,506 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 17:30:15,554 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 17:30:17,708 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 17:30:17,711 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 17:30:21,305 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 17:30:28,341 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 17:30:28,344 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 17:30:28,346 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 17:30:28,671 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 22:30:36 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: 1v63ao6fj3nuos7ch3jnd1djqall4dfu
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 17:30:28,689 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 17:30:28,690 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 17:30:30,089 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 17:30:30,094 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 17:30:30,095 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 17:30:30,097 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 17:30:30,097 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 17:30:35,758 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 17:35:04,937 [10] INFO InvoiceAPI.LoggerManager - App  Usuario que solicita el proceso: admin 
2022-08-02 17:35:07,358 [10] INFO InvoiceAPI.LoggerManager - App  Info - Proceso de digestión el archivo con el número de certificado: 30001000000400002434 
2022-08-02 17:35:18,308 [10] INFO InvoiceAPI.LoggerManager - App  Info - El proceso de digestion fue correcto.  
2022-08-02 17:35:24,073 [10] INFO InvoiceAPI.LoggerManager - App  Info - Búsqueda del comprobante en la base de datos. 
2022-08-02 17:35:24,451 [10] INFO InvoiceAPI.LoggerManager - App  Info - Datos del comprobante. Folio: 4804734, Número de serie del certificado: 00000000000000000000, rfc: CNM980114PI2, Serie: FNEX 
2022-08-02 17:35:24,452 [10] INFO InvoiceAPI.LoggerManager - App  Antes de pasar valor de Oracle o SQL:  1 
2022-08-02 17:35:24,819 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Diverza.  
2022-08-02 17:35:25,598 [10] INFO InvoiceAPI.LoggerManager - App  Info - Lo que se enviará al timbrado con Diverza. Usuario: admin. Contenido: {"credentials": {"id":"123414","token": "$2b$12$JgIf1J7db4e6f06VnNPsUOaQD3SpwUnzPqXDkuirQklcc8gMCMIDS" },"issuer": {"rfc": "CNM980114PI2"},"receiver": {"emails": [{"email": "micorreo@hotmail.com","format":"xml+pdf","template": "letter"}]},"document": {"ref-id": "CNM980114PI2FNEX4804734","certificate-number": "30001000000400002434","section": "all","format": "xml","template": "letter","type": "application/vnd.diverza.cfdi_4.0+xml","content": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxjZmRpOkNvbXByb2JhbnRlIHhtbG5zOmNmZGk9Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6aW5lPSJodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIiB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cuc2F0LmdvYi5teC9jZmQvNCBodHRwOi8vd3d3LnNhdC5nb2IubXgvc2l0aW9faW50ZXJuZXQvY2ZkLzQvY2ZkdjQwLnhzZCBodHRwOi8vd3d3LnNhdC5nb2IubXgvaW5lIGh0dHA6Ly93d3cuc2F0LmdvYi5teC9zaXRpb19pbnRlcm5ldC9jZmQvaW5lL2luZTExLnhzZCIgRXhwb3J0YWNpb249IjAxIiBMdWdhckV4cGVkaWNpb249IjY3MTYwIiBUaXBvRGVDb21wcm9iYW50ZT0iSSIgTWV0b2RvUGFnbz0iUFBEIiBUb3RhbD0iMTAiIE1vbmVkYT0iWFhYIiBTdWJUb3RhbD0iMTAiIENlcnRpZmljYWRvPSJNSUlGdXpDQ0E2T2dBd0lCQWdJVU16QXdNREV3TURBd01EQTBNREF3TURJME16UXdEUVlKS29aSWh2Y05BUUVMQlFBd2dnRXJNUTh3RFFZRFZRUUREQVpCUXlCVlFWUXhMakFzQmdOVkJBb01KVk5GVWxaSlEwbFBJRVJGSUVGRVRVbE9TVk5VVWtGRFNVOU9JRlJTU1VKVlZFRlNTVUV4R2pBWUJnTlZCQXNNRVZOQlZDMUpSVk1nUVhWMGFHOXlhWFI1TVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx2YzJOaGNpNXRZWEowYVc1bGVrQnpZWFF1WjI5aUxtMTRNUjB3R3dZRFZRUUpEQlF6Y21FZ1kyVnljbUZrWVNCa1pTQmpZV1JwZWpFT01Bd0dBMVVFRVF3Rk1EWXpOekF4Q3pBSkJnTlZCQVlUQWsxWU1Sa3dGd1lEVlFRSURCQkRTVlZFUVVRZ1JFVWdUVVZZU1VOUE1SRXdEd1lEVlFRSERBaERUMWxQUVVOQlRqRVJNQThHQTFVRUxSTUlNaTQxTGpRdU5EVXhKVEFqQmdrcWhraUc5dzBCQ1FJVEZuSmxjM0J2Ym5OaFlteGxPaUJCUTBSTlFTMVRRVlF3SGhjTk1Ua3dOakUzTVRrME5ERTBXaGNOTWpNd05qRTNNVGswTkRFMFdqQ0I0akVuTUNVR0ExVUVBeE1lUlZORFZVVk1RU0JMUlUxUVJWSWdWVkpIUVZSRklGTkJJRVJGSUVOV01TY3dKUVlEVlFRcEV4NUZVME5WUlV4QklFdEZUVkJGVWlCVlVrZEJWRVVnVTBFZ1JFVWdRMVl4SnpBbEJnTlZCQW9USGtWVFExVkZURUVnUzBWTlVFVlNJRlZTUjBGVVJTQlRRU0JFUlNCRFZqRWxNQ01HQTFVRUxSTWNSVXRWT1RBd016RTNNME01SUM4Z1dFbFJRamc1TVRFeE5sRkZOREVlTUJ3R0ExVUVCUk1WSUM4Z1dFbFJRamc1TVRFeE5rMUhVazFhVWpBMU1SNHdIQVlEVlFRTEV4VkZjMk4xWld4aElFdGxiWEJsY2lCVmNtZGhkR1V3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ04wcGVLcGdmT0w3NWlZUnYxZnFxK29WWXNMUFZVUi9HaWJZbUdLYzlJbkhGeTVsWUY2T1RZam5JSXZta09kUm9iYkdsQ1V4T1JYL3RMc2w4WWE5Z202WW83aEhuT0RSQklEdXAzR0lTRnpCLzk2UjlLL016WVFPY3NjTUlvQkRBUmF5Y25Mdnk3RmxNdk83L3JsVm5zU0FSeFpSTzhLejhaa2tzajJ6cGVZcGpaSXlhLzM2OStvR3FRazFjVFJrSG81OUp2SjRUZmJrLzNpSXlmNEgvSW5pOW5CZTljWVdvME1uS29iN0REdC92c2RpNXRBOG1NdEE5NTNMYXBOeUNaSURDUlFRbFVHTmdEcVk5LzhGNW1VdlZna2NjenNJZ0dkdmY5dk1RUFNmM2pqQ2lLajdqNnVjeGwxK0Z3SldtYnZnTm1pYVVSLzBxNG0ycm03OGxGQWdNQkFBR2pIVEFiTUF3R0ExVWRFd0VCL3dRQ01BQXdDd1lEVlIwUEJBUURBZ2JBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCY3BqMVRqVDRqaWluSXVqSWRBbEZ6RTZrUndZSkNuREcwOHpTcDRrU25TaGp4QURHRVhIMmNoZWhLTVYwRlk3YzRuakE1ZURHZEEvRzJPQ1RQdkY1cnBlQ1pQNUR3NTA0UlprWURsMnN1Unord2Exc05CVnBibkJKRUswZlFjTjNJZnRCd3NnTkZkRmhVdEN5dzNsdXMxU1NKYlB4akxIUzZGY1paNTFZU2VJZmNOWE9BdVRxZGltdXNhWHExNUdyU3JDT2tNNm4yamZqMnNNSllNMkhYYVhKNnJHVEVnWW1oWWR3eFd0aWw2UmZaQitmR1EvSDlJOVdMbmw0S1RaVVM2QzkrTkxIaDRGUERoU2sxOWZwUzJTLzU2YXFnRm9HQWtYQVl0OUZ5NUVDYVBjVUxJZkoxREVic1hLeVJkQ3YzSlk4OSswTU5rT2RhRG5zZW1TMm81R2wwOHpJNGlZdHQzTDQwZ0FaNjBOUGgzMWtWTG5ZTnNtdmZOeFl5S3ArQWVKdERIeVc5dzdmdE0wSG9pK0J1Um1jQVFTS0ZWM3BrOGo1MWxhK2pyUkJyQVV2OGJsYlJjUTVCaVpVd0p6SEZFS0l3VHNSR29SeUV4OTZzTm5CMDNuNkdUd2pJR3o5MlNtTGRObDk1cjlya3ZwKzJtNFM2cTFsUHVYYUZnN0RHQnJYV0M4aXlxZVdFMmlvYmR3SUl1WFBUTVZxUWIxMm0xZEFrSlZSTzVOZEhuUC9NcHFPdk9nTHFvWkJOSEd5Qmc0R3FtNHNDSkhDeEExYzhFbGZhMlJRVENrMHRBemxsTDR2T25JMUdIa0dKbjY1eG9rR3NhVTRCNEQzNnhoN2VXcmZqNC9wZ1dIbXRvREFZYTh3elN3bzJHVkNaT3MrbXRFZ09RQjkxL2c9PSIgTm9DZXJ0aWZpY2Fkbz0iMzAwMDEwMDAwMDA0MDAwMDI0MzQiIEZvcm1hUGFnbz0iOTkiIFNlbGxvPSJlMHpWTjgvY3M3NjFmTjRXV1pjL3FNbmN2QURzY3lwNUxqR2dhM2JSeU5neGFBWU41MWJtME82bVlvNnErUGcwYVhRYkZzQm8yMzdSM3lkYWdneWJTVEhSVHQ5Y2tyZklhblRMYnJFVDlteGVxLzc3aklpa1pnM2kyRFg2SW5haG5Rb29XdW5hNnlaWFBTTitNN2Z5NVVZNnljdlIvTll1Y0dTUUFNZWxrTll2ZzRzT0N4MHN6Ym95RGw0dWJ2TVZyVUx2NDkyK1hnWit3ZkNVYnFDLzhUV2xwRUU3UlBnV0laL0dwam1rN1BzUHNEK2tKTHJadGRuTXR6VWM2UHFIZVdUUUQ0d0hmclFjb1YxMFRLMTNyRjliZ25ORmZ5MWhjb2d3U2dvZHNad3g1VGd2a0p3cS9LdUV4cWsrVTNocEt5R3oxb1VrMzZqMUFESllnWkJkZGc9PSIgRmVjaGE9IjIwMjItMDgtMDJUMTE6NTA6NTkiIEZvbGlvPSI0ODA0NzM0IiBTZXJpZT0iRk5FWCIgVmVyc2lvbj0iNC4wIj48Y2ZkaTpFbWlzb3IgTm9tYnJlPSJBVCZhbXA7VCBDT01VTklDQUNJT05FUyBESUdJVEFMRVMgUyBERSBSTCBERSBDViIgUmZjPSJDTk05ODAxMTRQSTIiIFJlZ2ltZW5GaXNjYWw9IjYwMSIgLz48Y2ZkaTpSZWNlcHRvciBSZWdpbWVuRmlzY2FsUmVjZXB0b3I9IjYwNyIgRG9taWNpbGlvRmlzY2FsUmVjZXB0b3I9IjYyNzAwIiBVc29DRkRJPSJDUDAxIiBOb21icmU9IkFSVFVSTyBUQVBJQSBDRVNFw5FBIiBSZmM9IlRBQ0E4NDA5MDFWQTMiIC8+PGNmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbmNlcHRvIE9iamV0b0ltcD0iMDMiIEltcG9ydGU9IjEwIiBWYWxvclVuaXRhcmlvPSIxMCIgRGVzY3JpcGNpb249IlBhZ28iIENsYXZlVW5pZGFkPSJBQ1QiIENhbnRpZGFkPSIxIiBDbGF2ZVByb2RTZXJ2PSI4NDExMTUwNiIgLz48L2NmZGk6Q29uY2VwdG9zPjxjZmRpOkNvbXBsZW1lbnRvPjxpbmU6SU5FIFRpcG9Db21pdGU9IkVqZWN1dGl2byBFc3RhdGFsIiBUaXBvUHJvY2Vzbz0iT3JkaW5hcmlvIiBWZXJzaW9uPSIxLjEiPjxpbmU6RW50aWRhZCBDbGF2ZUVudGlkYWQ9Ik1FWCI+PGluZTpDb250YWJpbGlkYWQgSWRDb250YWJpbGlkYWQ9IjQ0NiIgLz48L2luZTpFbnRpZGFkPjwvaW5lOklORT48L2NmZGk6Q29tcGxlbWVudG8+PC9jZmRpOkNvbXByb2JhbnRlPg=="}} 
2022-08-02 17:35:25,600 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar con Diverza.  
2022-08-02 17:35:25,601 [10] INFO InvoiceAPI.LoggerManager - App  Info - Request enviado: System.Net.Http.StringContent 
2022-08-02 17:35:25,878 [10] INFO InvoiceAPI.LoggerManager - App  Info - Response recibido: StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.HttpConnection+HttpConnectionResponseContent, Headers:
{
  Date: Tue, 02 Aug 2022 22:35:33 GMT
  Server: Cowboy
  Cache-Control: must-revalidate, max-age=0, private
  X-Request-ID: r1po75m4dq2cdrrhuik500ibfi94iggl
  Connection: close
  Content-Length: 608
  Content-Type: application/json; charset=utf-8; charset=utf-8
} 
2022-08-02 17:35:25,891 [10] INFO InvoiceAPI.LoggerManager - App  Info - Error de respuesta del timbrado Diverza: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 17:35:25,891 [10] INFO InvoiceAPI.LoggerManager - App  Info - Detalle de error de respuesta del timbrado Diverza: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 17:35:25,989 [10] ERROR InvoiceAPI.LoggerManager - App  Error - No se pudo realizar el timbrado con Diverza.  
2022-08-02 17:35:25,991 [10] ERROR InvoiceAPI.LoggerManager - App  Error - código: ***DIVERZA CODE: 400 
2022-08-02 17:35:25,991 [10] ERROR InvoiceAPI.LoggerManager - App  Error - detalle: ***DIVERZA DETAILS***: Method: POST, RequestUri: 'https://serviciosdemo.diverza.com/api/v2/documents/stamp', Version: 2.0, Content: System.Net.Http.StringContent, Headers:
{
  Content-Type: application/json
  Content-Length: 5277
} 
2022-08-02 17:35:25,992 [10] ERROR InvoiceAPI.LoggerManager - App  Error - message: ***DIVERZA MESSAGE***: [{"issuer.rfc":"Client rfc: EKU9003173C9, does not match request issuer rfc: CNM980114PI2"}] 
2022-08-02 17:35:25,992 [10] INFO InvoiceAPI.LoggerManager - App  Prepara el envío para timbrar con Luna.  
2022-08-02 17:35:26,137 [10] INFO InvoiceAPI.LoggerManager - App  Info - Envío a timbrar el documento con Luna.  
2022-08-02 17:35:27,232 [10] INFO InvoiceAPI.LoggerManager - App  Info - Respuesta recibida. Request: Unauthorized 
